# 비동기
(2021.06.21)

## 콜백함수 리뷰

- 종류 : 반복 실행하는 함수 (iterator) & 이벤트에 따른 함수 (event handler)
- 주의사항 : 콜백은 함수 자체를 연결하는 것이지, 함수를 실행시키는 것이 아님
- 함수 뒤에 괄호()가 있으면 함수를 실행시키는 것이며, 괄호가 없으면 함수 자체를 뜻함
  ```js
  function functionParameter(func, num) {  // 함수 자체를 인자로 전달하기
  return func(num)                         // return문에서 함수를 실행함
  }
  ```
  ```js
  function handleClick() {
    console.log('button clicked');

  document.querySelector('#btn').onclick = handleClick;    // 함수 자체를 연결함 (정답)
  document.querySelector('#btn').onclick = handleClick();  // 함수를 실행을 연결함 (오답)
  }
  ```

## 비동기 개념

### 1. 동기와 비동기
- 블로킹(Blocking) : 하나의 작업이 끝날 때까지 이어지는 작업을 막는 것
- 동기(Synchronous) : blocking을 통해 하나의 작업이 끝나기 전까지는 이어지는 작업을 처리할 수 없는 방식이며, 요청에 대한 결과가 동시에 일어남
- 비동기(Asynchonous execution) : non-blocking하여 순서와 상관없이 작업할 수 있는 방식이며, 요청에 대한 결과가 동시에 일어나지 않음

### 2. 비동기의 주요 사례
- DOM Element의 이벤트 핸들러
  - 마우스, 키보드 입력 (click, keydown 등)
  - 페이지 로딩 (DOMContentLoaded 등)
- 타이머
  - 타이머 API (setTimeout 등)
  - 애니메이션 API (requestAnimationFrame)
- 서버에 자원 요청 및 응답
  - fetch API
  - AJAX (XHR)

### 3. 비동기 작동 원리 참고
- Event Loop : http://developer.mozila.org/ko/docs/Web/javaScript/EventLoop

- Philip Roberts : Help, I'm stuck in an event-loop https://vimeo.com/96425312

### 4. 비동기 호출
- 비동기 함수 전달 패턴1 : callback 패턴
  ```js
  let request = 'caffelatte'
  orderCoffeeAsync(request, function(response) { 
    drink (response);                             // response는 주문한 커피 결과
  });
  ```

- 비동기 함수 전달 패턴2 : 이벤트 등록 패턴
  ```js
  let request = 'caffelatte'
  orderCoffeeAsync(request).onready = function(response) { 
    drink (response);                                      // response는 주문한 커피 결과
  });
  ```

## 비동기 제어 방법

### 1. 콜백

- Error 핸들링 디자인
```js
const
```

### 2. Promise
- 콜백 함수가 계속 이어지면 콜백 헬에 빠짐
- 콜백 핸들링하기 위해 프로미스 필요

- Promise도 하나의 클래스
- new Promise()의 resolve()와 reject()로 핸들링

- Promising
- await



## Node.js 모듈 사용법
